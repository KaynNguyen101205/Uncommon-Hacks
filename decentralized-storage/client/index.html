<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Decentralized Storage - Auth, Encryption, Pinata, Decryption & Smart Contract</title>
  <!-- If you're not bundling, include ethers.js via CDN:
       <script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.esm.min.js"></script> -->
</head>
<body>
  <!-- ============================
       Authentication Section
       ============================ -->
  <h1>User Authentication with MetaMask</h1>
  <button id="loginButton">Login with MetaMask</button>
  
  <hr>
  
  <!-- ============================
       File Encryption Section
       ============================ -->
  <h1>File Encryption with AES</h1>
  <input type="file" id="fileInput">
  <button id="encryptButton">Encrypt File</button>
  <button id="downloadEncryptedButton">Download Encrypted File</button>
  <button id="uploadPinataButton">Upload Encrypted File to Pinata</button>
  
  <hr>
  
  <!-- ============================
       Secret Info Section (AES Key & CID)
       ============================ -->
  <h2>Secret Info</h2>
  <button id="toggleSecretButton">Show Secret Info</button>
  <div id="secretInfo" style="display: none; border: 1px solid #ccc; padding: 10px; margin-top: 10px;">
    <p>AES Key (hex): <span id="aesKeyDisplay"></span></p>
    <p>File CID: <span id="fileCIDDisplay"></span></p>
  </div>
  
  <hr>
  
  <!-- ============================
       File Retrieval & Decryption Section
       ============================ -->
  <h1>File Retrieval & Decryption</h1>
  <div>
    <label for="pinataCIDInput">Enter File CID from Pinata:</label>
    <input type="text" id="pinataCIDInput" placeholder="Enter CID">
  </div>
  <button id="fetchFileButton">Fetch Encrypted File from Pinata</button>
  <br/><br/>
  <div>
    <label for="aesKeyInput">Enter AES Key (hex):</label>
    <input type="text" id="aesKeyInput" placeholder="Paste your AES key here">
  </div>
  <button id="downloadDecryptedButton">Download Decrypted File</button>
  
  <hr>
  
  <!-- ============================
       Smart Contract Interaction Section (Midnight)
       ============================ -->
  <h1>Smart Contract Interaction (Midnight)</h1>
  <div>
    <label for="fileCIDInputSC">File CID:</label>
    <input type="text" id="fileCIDInputSC" placeholder="Enter file CID">
  </div>
  <div>
    <label for="userAddressInput">User Address:</label>
    <input type="text" id="userAddressInput" placeholder="Enter user address">
  </div>
  <button id="registerFileButton">Register File</button>
  <button id="checkAccessButton">Check Access</button>
  
  <!-- Load our main script as an ES module -->
  <script type="module" src="script.js"></script>
</body>
</html>
